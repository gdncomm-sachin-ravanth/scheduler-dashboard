# SAI Scheduler Dashboard

## Overview

A web-based monitoring and analytics tool for managing and tracking Rundeck scheduler jobs. Provides real-time insights into job execution status, performance metrics, and historical patterns through interactive visualizations, heatmaps, and detailed tables.

**Key Features:**
- Real-time job status monitoring and metrics
- Interactive heatmaps and execution analytics
- Pattern analysis for success rates and retry behavior
- Quick access to curl commands for manual execution
- Support for Canary and Non-Canary environments

## Pages

### üöÄ All Jobs (Rundeck Jobs)

View and manage all Rundeck scheduler jobs. Includes metrics dashboard, job schedule heatmap, interactive job table with filtering, and curl command access.

### üìä Today's Summary (Today's Report)

Real-time snapshot of today's scheduler execution results. Monitor success rates, identify failures, track data processing metrics, and view detailed execution table.

### üìà Overview (Reports Overview)

Historical overview of scheduler performance with daily breakdown charts and activity heatmaps showing trends and patterns over time.

### üîç Pattern Analysis

Deep dive into execution patterns, success rates, and performance metrics. Includes duration distribution charts and attempt analysis to understand scheduler behavior.

### üìã All Data (All Scheduler Data)

Comprehensive table view of all historical scheduler executions with detailed information for analysis and troubleshooting. Includes advanced filtering and sorting capabilities.

## Prerequisites

### Python 3 (Recommended)

**Verify Installation:**
```bash
python3 --version
```

**Install Python 3:**

- **macOS:** `brew install python3` or download from [python.org](https://www.python.org/downloads/)
- **Linux (Ubuntu/Debian):** `sudo apt install python3 python3-pip`
- **Linux (CentOS/RHEL):** `sudo yum install python3`
- **Windows:** Download from [python.org](https://www.python.org/downloads/) (check "Add Python to PATH")

**Alternative Options:** Node.js (`npx http-server -p 8000`) or PHP (`php -S localhost:8000`)

## Fetch Today's Data Script

The `fetch_today_data.py` script specifically fetches only today's scheduler data and updates `today-data.json`.

### Description

This script:
- Constructs a curl command dynamically with today's timestamp
- Updates the `analyticDate` value in the query to today's start timestamp (00:00:00) in WIB timezone (UTC+7)
- Fetches only records matching today's date from the API
- Saves the results directly to `today-data.json`
- Uses only Python standard library modules (no external dependencies required)

### Execution

Run the script using:

```bash
python3 fetch_today_data.py
```

The script will:
1. Calculate today's start timestamp in WIB timezone (epoch milliseconds)
2. Construct a curl command with the dynamic `analyticDate` value
3. Execute the curl command to fetch today's records
4. Save the results to `today-data.json`
5. Display progress information including record counts

### Use Cases

- **Faster updates**: Only fetches today's data (faster than fetching 14 days)
- **Targeted refresh**: When you only need to update today's data
- **Automated scheduling**: Can be scheduled to run periodically to keep today's data fresh

### Output File

- `today-data.json` - Contains only records with `analyticDate` matching today's start timestamp in WIB timezone

## Running the Dashboard

### Option 1: Using the Dashboard Server (Recommended - Enables Refresh Button)

The `server.py` script provides a web server with an API endpoint to refresh data directly from the dashboard.

1. Start the dashboard server:
   ```bash
   python3 server.py
   ```

2. Open `http://localhost:8000/scheduler-dashboard.html` in your browser

3. Use the **üîÑ Refresh Data** button in the top-right corner to update data without leaving the dashboard

**Benefits:**
- One-click data refresh from the dashboard
- Automatic data reload after refresh
- Shows refresh status and record counts

### Option 2: Using Basic HTTP Server

1. Ensure all three JSON data files are in the same directory as `scheduler-dashboard.html`:
   - `jobs-data.json` - Rundeck job configurations
   - `today-data.json` - Today's execution results (generated by `fetch_today_data.py`)
   - `past-data.json` - Historical execution data (must exist for Reports sections to work)

2. Start a local web server:
   ```bash
   python3 -m http.server 8000
   ```

3. Open `http://localhost:8000/scheduler-dashboard.html` in your browser

**Note:** With the basic HTTP server, you'll need to manually run `python3 fetch_today_data.py` to refresh today's data.

## Notes

- Requires a modern browser with JavaScript enabled
- All data is loaded from JSON files
- Curl commands can be copied directly from the modal for manual execution
- The refresh button only works when using `server.py` (not with basic HTTP server)
